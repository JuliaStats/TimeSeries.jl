<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Combine methods · TimeSeries.jl</title><meta name="title" content="Combine methods · TimeSeries.jl"/><meta property="og:title" content="Combine methods · TimeSeries.jl"/><meta property="twitter:title" content="Combine methods · TimeSeries.jl"/><meta name="description" content="Documentation for TimeSeries.jl."/><meta property="og:description" content="Documentation for TimeSeries.jl."/><meta property="twitter:description" content="Documentation for TimeSeries.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TimeSeries.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">TimeSeries Overview</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><a class="tocitem" href="../timearray/">The <code>TimeArray</code> time series type</a></li><li><a class="tocitem" href="../indexing/">Array indexing</a></li><li><a class="tocitem" href="../split/">Splitting by conditions</a></li><li><a class="tocitem" href="../modify/">Modify existing <code>TimeArray</code>s</a></li><li><a class="tocitem" href="../operators/">Mathematical, comparison, and logical operators</a></li><li><a class="tocitem" href="../apply/">Apply methods</a></li><li class="is-active"><a class="tocitem" href>Combine methods</a><ul class="internal"><li><a class="tocitem" href="#merge"><span><code>merge</code></span></a></li><li><a class="tocitem" href="#collapse"><span><code>collapse</code></span></a></li><li><a class="tocitem" href="#vcat"><span><code>vcat</code></span></a></li><li><a class="tocitem" href="#map"><span><code>map</code></span></a></li></ul></li><li><a class="tocitem" href="../readwrite/">I/O</a></li><li><a class="tocitem" href="../tables/">Tables.jl Interface Integration</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><a class="tocitem" href="../retime/">Retime</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Combine methods</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Combine methods</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaStats/TimeSeries.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaStats/TimeSeries.jl/blob/master/docs/src/combine.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Combine-methods"><a class="docs-heading-anchor" href="#Combine-methods">Combine methods</a><a id="Combine-methods-1"></a><a class="docs-heading-anchor-permalink" href="#Combine-methods" title="Permalink"></a></h1><p><code>TimeSeries</code> supports merging two <code>TimeArray</code>s, and squishing the timestamp to a longer-term interval while representing values that make sense.</p><h2 id="merge"><a class="docs-heading-anchor" href="#merge"><code>merge</code></a><a id="merge-1"></a><a class="docs-heading-anchor-permalink" href="#merge" title="Permalink"></a></h2><p>The <code>merge</code> method performs joins between two <code>TimeArray</code>s. The default behaviour is to perform an inner join, such that the resulting <code>TimeArray</code> contains only timestamps that both <code>TimeArray</code>s share, and values that correspond to that timestamp.</p><p>The <code>AAPL</code> object from <code>MarketData</code> has 8,336 rows of data from Dec 12, 1980 to Dec 31, 2013. If we merge it with the <code>CAT</code> object, which contains 13,090 rows of data from Jan 2, 1962 to Dec 31, 2013 we might expect the resulting <code>TimeArray</code> to have 8,336 rows of data, corresponding to the length of <code>AAPL</code>. This assumes that every day that Apple Computer, Inc. traded, Caterpillar, Inc likewise traded. It turns out that this isn&#39;t true. <code>CAT</code> did not trade on Sep 27, 1985 because Hurricane Glorio shut down the New York Stock Exchange. Apple Computer trades on the electronic NASDAQ and its trading was not halted on that day. The result of the merge should then be 8,335 rows:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using TimeSeries</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using MarketData</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; AppleCat = merge(AAPL, CAT);</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; length(AppleCat)</code><code class="nohighlight hljs ansi" style="display:block;">8335</code></pre><p>Left, right, and outer joins can also be performed by passing the corresponding symbol. These joins introduce <code>NaN</code> values when data for a particular timestamp only exists in one of the series to be merged. For example:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; merge(op[1:3], cl[2:4]; method=:left)</code><code class="nohighlight hljs ansi" style="display:block;">3×2 TimeArray{Float64, 2, Date, Matrix{Float64}} 2000-01-03 to 2000-01-05
┌────────────┬────────┬───────┐
│            │ Open   │ Close │
├────────────┼────────┼───────┤
│ 2000-01-03 │ 104.88 │   NaN │
│ 2000-01-04 │ 108.25 │ 102.5 │
│ 2000-01-05 │ 103.75 │ 104.0 │
└────────────┴────────┴───────┘</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; merge(op[1:3], cl[2:4]; method=:right)</code><code class="nohighlight hljs ansi" style="display:block;">3×2 TimeArray{Float64, 2, Date, Matrix{Float64}} 2000-01-04 to 2000-01-06
┌────────────┬────────┬───────┐
│            │ Open   │ Close │
├────────────┼────────┼───────┤
│ 2000-01-04 │ 108.25 │ 102.5 │
│ 2000-01-05 │ 103.75 │ 104.0 │
│ 2000-01-06 │    NaN │  95.0 │
└────────────┴────────┴───────┘</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; merge(op[1:3], cl[2:4]; method=:outer)</code><code class="nohighlight hljs ansi" style="display:block;">4×2 TimeArray{Float64, 2, Date, Matrix{Float64}} 2000-01-03 to 2000-01-06
┌────────────┬────────┬───────┐
│            │ Open   │ Close │
├────────────┼────────┼───────┤
│ 2000-01-03 │ 104.88 │   NaN │
│ 2000-01-04 │ 108.25 │ 102.5 │
│ 2000-01-05 │ 103.75 │ 104.0 │
│ 2000-01-06 │    NaN │  95.0 │
└────────────┴────────┴───────┘</code></pre><p>The <code>merge</code> method allows users to specify the value for the <code>meta</code> field of the merged object. When that value is not explicitly provided, <code>merge</code> will concatenate the <code>meta</code> field values, assuming these values to be strings. This covers the vast majority of use cases. In edge cases when users do not provide a <code>meta</code> value and both field values are not strings, the merged object will take on <code>Void</code> as its <code>meta</code> field value:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; meta(AppleCat)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;AAPL_CAT&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; CatApple = merge(CAT, AAPL; meta=47);</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; meta(CatApple)</code><code class="nohighlight hljs ansi" style="display:block;">47</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; meta(merge(AppleCat, CatApple))</code></pre><article><details class="docstring" open="true"><summary id="Base.merge"><a class="docstring-binding" href="#Base.merge"><code>Base.merge</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">merge(ta1::TimeArray{T}, ta2::TimeArray{T}, [tas::TimeArray{T}...];
      method = :inner, colnames = [...], padvalue = NaN)</code></pre><p>Merge several <code>TimeArray</code>s along with the time index.</p><p><strong>Argument</strong></p><ul><li><code>method::Symbol</code>: <code>:inner</code>, <code>:outer</code>, <code>:left</code> or <code>:right</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaStats/TimeSeries.jl/blob/1dfdd518903296d2d8877628d7845762adf8a4bb/src/combine.jl#L20-L29">source</a></section></details></article><h2 id="collapse"><a class="docs-heading-anchor" href="#collapse"><code>collapse</code></a><a id="collapse-1"></a><a class="docs-heading-anchor-permalink" href="#collapse" title="Permalink"></a></h2><p>The <code>collapse</code> method allows for compressing data into a larger time frame. For example, converting daily data into monthly data. When compressing dates, something rational has to be done with the values that lived in the more granular time frame. To define what happens, a function call is made. In our example, we want to compress the daily <code>cl</code> closing prices from daily to monthly. It makes sense for us to take the <code>last</code> value known and have that represented with the corresponding timestamp. A non-exhaustive list of valid time methods is presented below.</p><table><tr><th style="text-align: left"><code>Dates</code> method</th><th style="text-align: left">Time length</th></tr><tr><td style="text-align: left"><code>Dates.quarter</code></td><td style="text-align: left">quarterly</td></tr><tr><td style="text-align: left"><code>day</code></td><td style="text-align: left">daily</td></tr><tr><td style="text-align: left"><code>week</code></td><td style="text-align: left">weekly, starting from Monday.</td></tr><tr><td style="text-align: left"><code>month</code></td><td style="text-align: left">monthly</td></tr><tr><td style="text-align: left"><code>year</code></td><td style="text-align: left">yearly</td></tr><tr><td style="text-align: left"><code>hour</code></td><td style="text-align: left">hourly</td></tr><tr><td style="text-align: left"><code>minute</code></td><td style="text-align: left">minutely</td></tr><tr><td style="text-align: left"><code>second</code></td><td style="text-align: left">secondly</td></tr></table><p>Showing this code in REPL:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using TimeSeries</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using MarketData</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; collapse(cl, month, last)</code><code class="nohighlight hljs ansi" style="display:block;">24×1 TimeArray{Float64, 1, Date, Vector{Float64}} 2000-01-31 to 2001-12-31
┌────────────┬────────┐
│            │ Close  │
├────────────┼────────┤
│ 2000-01-31 │ 103.75 │
│ 2000-02-29 │ 114.62 │
│ 2000-03-31 │ 135.81 │
│ 2000-04-28 │ 124.06 │
│ 2000-05-31 │   84.0 │
│ 2000-06-30 │  52.38 │
│ 2000-07-31 │  50.81 │
│ 2000-08-31 │  60.94 │
│     ⋮      │   ⋮    │
│ 2001-06-29 │  23.25 │
│ 2001-07-31 │  18.79 │
│ 2001-08-31 │  18.55 │
│ 2001-09-28 │  15.51 │
│ 2001-10-31 │  17.56 │
│ 2001-11-30 │   21.3 │
│ 2001-12-31 │   21.9 │
└────────────┴────────┘
         9 rows omitted</code></pre><p>We can also supply the function that chooses the timestamp and the function that determines the corresponding value independently:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Statistics</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; collapse(cl, month, last, mean)</code><code class="nohighlight hljs ansi" style="display:block;">24×1 TimeArray{Float64, 1, Date, Vector{Float64}} 2000-01-31 to 2001-12-31
┌────────────┬─────────┐
│            │ Close   │
├────────────┼─────────┤
│ 2000-01-31 │ 103.359 │
│ 2000-02-29 │ 111.638 │
│ 2000-03-31 │ 128.503 │
│ 2000-04-28 │ 123.106 │
│ 2000-05-31 │  100.81 │
│ 2000-06-30 │ 78.8891 │
│ 2000-07-31 │ 53.7585 │
│ 2000-08-31 │ 51.3122 │
│     ⋮      │    ⋮    │
│ 2001-06-29 │  21.531 │
│ 2001-07-31 │ 21.4624 │
│ 2001-08-31 │ 18.6465 │
│ 2001-09-28 │  16.602 │
│ 2001-10-31 │ 17.3222 │
│ 2001-11-30 │  19.649 │
│ 2001-12-31 │  21.695 │
└────────────┴─────────┘
          9 rows omitted</code></pre><article><details class="docstring" open="true"><summary id="TimeSeries.collapse"><a class="docstring-binding" href="#TimeSeries.collapse"><code>TimeSeries.collapse</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">collapse(ta, period, timestamp; ...)
collapse(ta, period, timestamp, value; kw...)
</code></pre><p>The <code>collapse</code> method allows for compressing data into a larger time frame. </p><p>For example, converting daily data into monthly data. When compressing dates, something rational has to be done with the values that lived in the more granular time frame. To define what happens, a function call is made.</p><p><strong>Arguments:</strong></p><ul><li><code>ta::TimeArray</code>: Original data</li><li><code>period::Union{Function,Dates.Period}</code>: Period or method for determining the period</li><li><code>timestamp::Function</code>: Method that determines which timestamp represents the whole period, e.g. <code>last</code></li><li><code>value::Function = timestamp</code>: Method that should be applied to the data within the period, e.g. <code>mean</code></li></ul><pre><code class="language-julia hljs">collapse(ta, month, last)
collapse(ta, month, last, mean)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaStats/TimeSeries.jl/blob/1dfdd518903296d2d8877628d7845762adf8a4bb/src/combine.jl#L200-L218">source</a></section></details></article><h2 id="vcat"><a class="docs-heading-anchor" href="#vcat"><code>vcat</code></a><a id="vcat-1"></a><a class="docs-heading-anchor-permalink" href="#vcat" title="Permalink"></a></h2><p>The <code>vcat</code> method is used to concatenate time series: if you have two time series with the same columns, this function can merge them into a single object. Notably, it can be used to merge data that is split into multiple files. Its behaviour is quite different from <code>merge</code>, which does not consider that its arguments are actually the <em>same</em> time series.</p><p>This concatenation is <em>vertical</em> (<code>vcat</code>) because it does not create columns, it extends existing ones (which are represented vertically).</p><article><details class="docstring" open="true"><summary id="Base.vcat-Tuple{Vararg{TimeArray}}"><a class="docstring-binding" href="#Base.vcat-Tuple{Vararg{TimeArray}}"><code>Base.vcat</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">vcat(tas)
</code></pre><p>Concatenate two <span>$TimeArray$</span> into single object.</p><p>If there are duplicated timestamps, we will keep order as the function input.</p><pre><code class="language-julia-repl hljs">julia&gt; a = TimeArray([Date(2015, 10, 1), Date(2015, 10, 2), Date(2015, 10, 3)], [1, 2, 3]);

julia&gt; b = TimeArray([Date(2015, 10, 2), Date(2015, 10, 3)], [4, 5]);

julia&gt; [a; b]
5×1 TimeArray{Int64,1,Date,Array{Int64,1}} 2015-10-01 to 2015-10-03
│            │ A     │
├────────────┼───────┤
│ 2015-10-01 │ 1     │
│ 2015-10-02 │ 2     │
│ 2015-10-02 │ 4     │
│ 2015-10-03 │ 3     │
│ 2015-10-03 │ 5     │</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaStats/TimeSeries.jl/blob/1dfdd518903296d2d8877628d7845762adf8a4bb/src/combine.jl#L227-L249">source</a></section></details></article><h2 id="map"><a class="docs-heading-anchor" href="#map"><code>map</code></a><a id="map-1"></a><a class="docs-heading-anchor-permalink" href="#map" title="Permalink"></a></h2><p>This function allows complete transformation of the data within the time series, with alteration on both the time stamps and the associated values. It works exactly like <code>Base.map</code>: the first argument is a binary function (the time stamp and the values) that returns two values, respectively the new time stamp and the new vector of values. It does not perform any kind of compression like <code>collapse</code>, but rather transformations.</p><p>The simplest example is to postpone all time stamps in the given time series, here by one year:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using TimeSeries</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Dates</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ta = TimeArray([Date(2015, 10, 01), Date(2015, 11, 01)], [15, 16])</code><code class="nohighlight hljs ansi" style="display:block;">2×1 TimeArray{Int64, 1, Date, Vector{Int64}} 2015-10-01 to 2015-11-01
┌────────────┬────┐
│            │ A  │
├────────────┼────┤
│ 2015-10-01 │ 15 │
│ 2015-11-01 │ 16 │
└────────────┴────┘</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; map((timestamp, values) -&gt; (timestamp + Year(1), values), ta)</code><code class="nohighlight hljs ansi" style="display:block;">2×1 TimeArray{Int64, 1, Date, Vector{Int64}} 2016-10-01 to 2016-11-01
┌────────────┬────┐
│            │ A  │
├────────────┼────┤
│ 2016-10-01 │ 15 │
│ 2016-11-01 │ 16 │
└────────────┴────┘</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../apply/">« Apply methods</a><a class="docs-footer-nextpage" href="../readwrite/">I/O »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 31 December 2025 02:32">Wednesday 31 December 2025</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
